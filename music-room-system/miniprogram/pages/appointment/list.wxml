<view class="container">
  <!-- æ ‡ç­¾æ  -->
  <view class="tabs">
    <view class="tab-item {{activeTab === index ? 'active' : ''}}" 
          wx:for="{{tabs}}" 
          wx:key="index"
          bindtap="switchTab"
          data-index="{{index}}">
      {{item}}
    </view>
  </view>
  
  <!-- é¢„çº¦åˆ—è¡¨ -->
  <view class="appointment-list">
    <view class="appointment-card" wx:for="{{filteredAppointments}}" wx:key="id">
      <view class="appointment-header">
        <view class="course-info">
          <text class="course-name">{{item.course_name}}</text>
          <text class="teacher-name">{{item.teacher_name}}è€å¸ˆ</text>
        </view>
        <view class="status status-{{item.status}}">
          {{item.status === 'pending' ? 'å¾…ç¡®è®¤' : ''}}
          {{item.status === 'confirmed' ? 'å·²ç¡®è®¤' : ''}}
          {{item.status === 'completed' ? 'å·²å®Œæˆ' : ''}}
          {{item.status === 'cancelled' ? 'å·²å–æ¶ˆ' : ''}}
        </view>
      </view>
      
      <view class="appointment-body">
        <view class="info-item">
          <text class="info-label">ä¸Šè¯¾æ—¶é—´</text>
          <text class="info-value">{{item.appointment_date}} {{item.start_time}}-{{item.end_time}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">è¯¾ç¨‹è´¹ç”¨</text>
          <text class="info-value price">Â¥{{item.price}}</text>
        </view>
        <view class="info-item" wx:if="{{item.notes}}">
          <text class="info-label">å¤‡æ³¨</text>
          <text class="info-value">{{item.notes}}</text>
        </view>
      </view>
      
      <view class="appointment-footer" wx:if="{{item.status !== 'cancelled' && item.status !== 'completed'}}">
        <button class="action-btn" wx:if="{{item.status === 'pending'}}" 
                bindtap="cancelAppointment" data-id="{{item.id}}">
          å–æ¶ˆé¢„çº¦
        </button>
        <button class="action-btn primary" wx:if="{{item.status === 'confirmed'}}"
                bindtap="confirmComplete" data-id="{{item.id}}">
          ç¡®è®¤å®Œæˆ
        </button>
        <button class="action-btn" bindtap="makePhoneCall" data-phone="{{item.teacher_phone}}">
          è”ç³»è€å¸ˆ
        </button>
      </view>
    </view>
  </view>
  
  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{filteredAppointments.length === 0}}" class="empty">
    <text class="empty-icon">ğŸ“…</text>
    <text class="empty-text">æš‚æ— é¢„çº¦è®°å½•</text>
  </view>
</view>